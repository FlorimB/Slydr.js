var T=Object.defineProperty;var u=a=>{throw TypeError(a)};var v=(a,t,e)=>t in a?T(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var p=(a,t,e)=>v(a,typeof t!="symbol"?t+"":t,e),x=(a,t,e)=>t.has(a)||u("Cannot "+e);var g=(a,t,e)=>t.has(a)?u("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e);var h=(a,t,e)=>(x(a,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();var o,m,f;class d{constructor(t){g(this,o);this.elements=t}manage(){this.elements.forEach(([t,{properties:e,classes:i}])=>{if(t instanceof HTMLElement)try{this.manager(t,e,i)}catch(s){console.error("Something went wrong!",s)}})}get manager(){return(t,e,i)=>{e&&h(this,o,m).call(this,t,e),i&&h(this,o,f).call(this,t,i)}}}o=new WeakSet,m=function(t,e){Object.entries(e).forEach(([i,s])=>{Object.entries(s).forEach(([n,r])=>{typeof t.style[i]=="function"&&t.style[i](n,r||"")})})},f=function(t,e){Object.entries(e).forEach(([i,s])=>{[].concat(s).forEach(n=>{t.classList[i](n)})})};class P{applyStyles(t){if(t.slidesWidth===0){const r=parseInt(t.container.dataset.mobileWidth)||350,l=parseInt(t.container.dataset.tabletWidth)||560,y=parseInt(t.container.dataset.desktopWidth)||768,c=window.innerWidth;c<=768?t.slidesWidth=r:c<=630?t.slidesWidth=l:t.slidesWidth=y}if(t.slides.length<=t.options.perPage){const r=t.container.clientWidth,l=t.slides.length;t.slidesWidth=r/l}const e=100;t.slidesWidth=Math.max(t.slidesWidth,e);const i=t.container,s={properties:{setProperty:{"--slides-per-page":`${t.options.perPage}`,"--gap":`${t.options.gap}px`,"--slides-width":`${t.slidesWidth}px`,"--transformed-slide":`${this.updateTransform(t)}`}}};new d([[i,s]]).manage()}updateTransform(t){const e=t.currentIndex*(t.slidesWidth+t.options.gap);return t.currentTranslate=-e,`translate3d(${t.currentTranslate}px, 0, 0)`}}class S{constructor(t,e,i){this.styleHandler=t,this.updateTransform=e,this.updateActivePagination=i}startSlider(t){t.controls&&t.controls.addEventListener("click",e=>{const i=e.target.closest(".next, .prev");i&&(i.classList.contains("next")?this.nextSlide(t):i.classList.contains("prev")&&this.prevSlide(t))})}nextSlide(t){t.currentIndex++,t.currentIndex>t.slides.length-t.options.perPage&&(t.currentIndex=0),this.styleHandler.applyStyles(t),this.updateTransform(t),this.updateActivePagination(t)}prevSlide(t){t.currentIndex--,t.currentIndex<0&&(t.currentIndex=t.slides.length-t.options.perPage),this.styleHandler.applyStyles(t),this.updateTransform(t),this.updateActivePagination(t)}}class C{constructor(t){p(this,"addPagination",t=>{t.paginationContainer.innerHTML="";const e=document.createDocumentFragment(),i=t.slides.length-t.options.perPage+1;Array.from({length:i},(s,n)=>{const r=document.createElement("button");r.classList.add("pagination-btn"),n===t.currentIndex&&r.classList.add("active"),r.addEventListener("click",()=>this.goToIndex(t,n)),e.appendChild(r)}),t.paginationContainer.appendChild(e)});this.styleHandler=t}menuPagination(t){if(!t.paginationContainer)return;const e=t.paginationContainer.querySelectorAll(".menu .pagination-btn"),i=e.length;this.removeActiveClasses(e),this.menuIndex(t,e,i)}removeActiveClasses(t){t.forEach(e=>e.classList.remove("active"))}menuIndex(t,e,i){e.forEach((s,n)=>{s.addEventListener("click",()=>{this.navigateToTargetIndex(t,i,n),this.removeActiveClasses(e),s.classList.add("active")}),s.classList.toggle("active",n===t.currentIndex)})}navigateToTargetIndex(t,e,i){const s=t.slides.length,{perPage:n}=t.options;if(s>n){const r=i>=e-3?s-n:i;this.goToIndex(t,r)}}goToIndex(t,e){t.currentIndex=e,this.styleHandler.applyStyles(t),t.currentTranslate=-e*(t.slidesWidth+t.options.gap),this.updateActivePagination(t)}updateActivePagination(t){t.paginationContainer&&t.paginationContainer.querySelectorAll(".pagination-btn, .menu-pagination-btn").forEach((i,s)=>{i.classList.toggle("active",s===t.currentIndex)})}}class b{constructor(t,e,i,s){this.instance=t,this.applyStyles=e,this.updateTransform=i,this.updateActivePagination=s,this.initialize()}initialize(){this.startX=0,this.currentTranslate=this.instance.currentTranslate||0,this.prevTranslate=0,this.slideWidthWithGap=this.instance.slidesWidth+this.instance.options.gap,this.threshold=this.slideWidthWithGap/4,this.animationID=null}updateCurrentTransform(){this.instance.container.style.setProperty("--transformed-slide",`translate3d(${this.currentTranslate}px, 0, 0)`)}enableDragging(){this.getEvents().forEach(({type:e,handler:i,options:s})=>{this.instance.carousel.addEventListener(e,i.bind(this),s)}),["mouseup","touchend"].forEach(e=>{document.addEventListener(e,this.endDrag.bind(this),{passive:!0})})}getEvents(){return[{type:"mousedown",handler:this.startDrag,options:{passive:!1}},{type:"touchstart",handler:this.startDrag,options:{passive:!1}},{type:"mousemove",handler:this.drag,options:{passive:!1}},{type:"touchmove",handler:this.drag,options:{passive:!1}},{type:"mouseup",handler:this.endDrag,options:{passive:!0}},{type:"touchend",handler:this.endDrag,options:{passive:!0}}]}startDrag(t){t.preventDefault(),t.stopPropagation(),this.instance.isDragging=!0,this.startX=t.type==="touchstart"?t.touches[0].clientX:t.clientX,this.prevTranslate=this.instance.currentTranslate,this.instance.carousel.style.userSelect="none",this.instance.slider.style.transition="none",this.updateTheSlider(t)}drag(t){this.instance.isDragging&&this.updateTheSlider(t)}endDrag(){if(!this.instance.isDragging)return;this.instance.isDragging=!1,this.instance.carousel.style.userSelect="auto";const t=this.calculateVelocity(),e=this.currentTranslate+t;this.snapToClosestSlide(e),this.applyStyles(),this.updateActivePagination()}updateTheSlider(t){const e=this.getDiffX(t);this.updateCurrentTranslate(e),this.updateCurrentTransform(this.instance)}getDiffX(t){return(t.type==="touchmove"?t.touches[0].clientX:t.clientX)-this.startX}updateCurrentTranslate(t){this.currentTranslate=this.prevTranslate+t*.7,setTimeout(()=>{this.currentTranslate=this.clampTranslation(this.currentTranslate)})}clampTranslation(t){const e=this.getMaxTranslate();return Math.max(Math.min(t,0),e)}getMaxTranslate(){return-(this.instance.slides.length-this.instance.options.perPage)*this.slideWidthWithGap}calculateVelocity(){return(this.currentTranslate-this.prevTranslate)*2}snapToClosestSlide(t){const e=Math.round(-t/this.slideWidthWithGap);this.instance.currentIndex=Math.max(0,Math.min(e,this.instance.slides.length-this.instance.options.perPage)),this.currentTranslate=-this.instance.currentIndex*this.slideWidthWithGap,this.instance.slider.style.transition="transform .8s ease",this.instance.container.style.setProperty("--transformed-slide",`${this.currentTranslate}px`)}}class L{constructor(t,e,i,s){this.instance=t,this.applyStyles=e,this.updateTransform=i,this.updateActivePagination=s,this.lightBoxContainer=t.container.closest(".module-gallery-carousel").querySelector(".lightbox"),this.closeButton=this.lightBoxContainer.querySelector(".close-lightbox"),this.slider=t.container.closest(".module-gallery-carousel").querySelector(".gallery .slider"),this.isLightbox=this.instance.container.classList.contains("lightbox")}initialize(){!this.lightBoxContainer||!this.instance.slider||!this.closeButton||this.isLightbox&&this.addEventListeners()}addEventListeners(){this.slider.addEventListener("mousedown",()=>this.startClickTimer()),this.slider.addEventListener("touchstart",()=>this.startClickTimer(),{passive:!0}),this.slider.addEventListener("touchend",t=>this.fireEvent(t)),this.slider.addEventListener("mouseup",t=>this.fireEvent(t)),this.closeButton.addEventListener("click",()=>this.closeLightBox())}startClickTimer(){this.instance.clickTimer&&clearTimeout(this.instance.clickTimer),this.instance.clickTimer=setTimeout(()=>{this.instance.clickTimer=null},110)}fireEvent(t){this.instance.clickTimer!==null&&(clearTimeout(this.instance.clickTimer),this.instance.clickTimer=null,this.openLightBox(t))}openLightBox(t){if(t.target.tagName!=="IMG"&&!this.instance.container.classList.contains("lightbox"))return;const e=t.target.getAttribute("data-index");this.instance.currentIndex=parseInt(e),this.applyStyles(this.instance),this.updateActivePagination(this.instance),this.updateTransform(this.instance),this.modify()}modify(){new d([[this.lightBoxContainer,{classes:{remove:"hidden",add:["show-lightbox"]}}],[document.body,{classes:{add:"overflow-hidden"}}]]).manage()}closeLightBox(){if(!this.instance.container.classList.contains("lightbox"))return;new d([[this.lightBoxContainer,{classes:{add:["hidden"],remove:["show-lightbox"]}}],[document.body,{classes:{remove:"overflow-hidden"}}]]).manage()}}class I{constructor(t,e,i){this.styleHandler=t,this.controlsHandler=e,this.paginationHandler=i}getInstanceOptions(t){const{perpage:e,gap:i,lightbox:s,menu:n}=t.dataset;return{perPage:window.innerWidth<=520?1:window.innerWidth<=760?2:parseInt(e)||3,gap:parseInt(i)||16,lightBox:s=="1",menu:n=="1"}}setupCarousel(t,e){const i=this.createInstance(t,{...e}),s=i.slides.length>i.options.perPage,n=i.options.pagination&&i.paginationContainer,r=(i.options.perPage-1)*i.options.gap;return this.call(i,s,n,r),i}createInstance(t,e){return{container:t,carousel:t.querySelector(".carousel"),slider:t.querySelector(".slider"),slides:t.querySelectorAll(".slides"),controls:t.querySelector(".controls"),next:t.querySelector(".next"),prev:t.querySelector(".prev"),paginationContainer:t.querySelector(".pagination"),currentIndex:0,currentTranslate:0,prevTranslate:0,options:e,isDragging:!1,clickTimer:null,menu:e.menu}}calculateSlidesWidth(t,e,i){return(t-e)/i}call(t,e,i,s){t.slidesWidth=this.calculateSlidesWidth(t.carousel.clientWidth,s,t.options.perPage),this.styleHandler.applyStyles(t),this.initializeControls(t,e),this.initializePagination(t,e,i),this.initializeDragging(t),this.initializeLightBox(t)}initializeControls(t,e){var i;e?t.options.menu?(i=t.controls)==null||i.remove():this.controlsHandler.startSlider(t):t.controls&&t.controls.remove()}initializePagination(t,e,i){i&&e&&!t.options.menu?this.paginationHandler.addPagination(t):t.paginationContainer&&this.handleExistingPaginationContainer(t)}handleExistingPaginationContainer(t){t.paginationContainer.classList.contains("menu")?this.paginationHandler.menuPagination(t):t.paginationContainer.remove()}initializeDragging(t){t.options.drag&&t.slides.length>t.options.perPage&&this.enableDragging(t)}initializeLightBox(t){if(!t.options.lightBox&&!t.container.classList.contains("lightbox"))return;new L(t,this.styleHandler.applyStyles.bind(this.styleHandler),this.styleHandler.updateTransform.bind(this.styleHandler),this.paginationHandler.updateActivePagination.bind(this.paginationHandler)).initialize()}enableDragging(t){new b(t,()=>this.styleHandler.applyStyles(t),()=>this.styleHandler.updateTransform(t),()=>this.paginationHandler.updateActivePagination(t)).enableDragging()}}class E{constructor(t,e={}){this.carouselContainers=document.querySelectorAll(t),this.defaultOptions={perPage:3,gap:16,drag:!0,pagination:!1,lightBox:!1,menu:!1},this.options=Object.assign(this.defaultOptions,e),this.instances=[],this.styleHandler=new P,this.paginationHandler=new C(this.styleHandler),this.controlsHandler=new S(this.styleHandler,this.updateTransform.bind(this),this.paginationHandler.updateActivePagination.bind(this)),this.carouselSettings=new I(this.styleHandler,this.controlsHandler,this.paginationHandler)}mount(){this.carouselContainers.forEach(t=>{const e=this.carouselSettings.getInstanceOptions(t),i={...this.options,...e},s=this.setupCarousel(t,i);this.instances.push(s)})}setupCarousel(t,e){return this.carouselSettings.setupCarousel(t,e)}updateTransform(t){return this.styleHandler.updateTransform(t)}}new E(".slider-container",{gap:24,pagination:!0,drag:!0}).mount();
